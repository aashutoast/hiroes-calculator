<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Combined Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f9;
      color: #333;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 24px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: left;
      color: #007BFF;
      margin-top: 0px;
    }

    p {
      line-height: 1.4em;
      font-size: .9rem;
    }

    label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #007BFF;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    .results {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }

    .result {
      flex: 1;
      min-width: 300px;
      padding: 15px;
      background: #e7f3ff;
      border-left: 5px solid #007BFF;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Combined Calculator</h1>
    <p>Enter the amount below to calculate both forward and reverse results. The forward calculation determines costs based on service amount, while the reverse calculation works backward from the total listing cost.</p>

    <label for="inputAmount">Enter Amount (₹):</label>
    <input type="number" id="inputAmount" placeholder="Enter any amount" />
    <button onclick="calculateBoth()">Calculate</button>

    <div class="results">
      <div id="forwardResult" class="result" style="display: none;"></div>
      <div id="reverseResult" class="result" style="display: none;"></div>
    </div>
  </div>

  <script>
    function calculateBoth() {
      const inputAmount = parseFloat(document.getElementById('inputAmount').value);

      if (isNaN(inputAmount) || inputAmount <= 0) {
        alert('Please enter a valid amount.');
        return;
      }

      calculateForward(inputAmount);
      calculateReverse(inputAmount);
    }

    function calculateForward(serviceAmount) {
      const minimumMargin = 40;
      const commissionRate = 0.1;
      const customerChargeRate = 0.2;

      let workerCommission = 0;
      let customerExtraCharge = 0;

      if (serviceAmount <= 200) {
        customerExtraCharge = serviceAmount * customerChargeRate;
      } else if (serviceAmount < 400) {
        workerCommission = serviceAmount * commissionRate;
        if (workerCommission < minimumMargin) {
          customerExtraCharge = minimumMargin - workerCommission;
        }
      } else {
        workerCommission = serviceAmount * commissionRate;
      }

      const workerEarnings = serviceAmount - workerCommission;
      const newServiceCost = serviceAmount + customerExtraCharge;

      document.getElementById('forwardResult').style.display = 'block';
      document.getElementById('forwardResult').innerHTML = `
        <h3>Forward Calculation</h3>
        <p><strong>Worker Service Cost:</strong> ₹${serviceAmount.toFixed(2)}</p>
        <p><strong>Commission to Hiroes:</strong> ₹${workerCommission.toFixed(2)}</p>
        <p><strong>Worker Earnings:</strong> ₹${workerEarnings.toFixed(2)}</p>
        <p><strong>Customer Pays Extra (if applicable):</strong> ₹${customerExtraCharge.toFixed(2)}</p>
        <p><strong>Final Cost to Customer:</strong> ₹${newServiceCost.toFixed(2)}</p>
      `;
    }

    function calculateReverse(listingCost) {
      const minimumMargin = 40;
      const commissionRate = 0.1;
      const customerChargeRate = 0.2;

      let serviceAmount = 0;
      let workerCommission = 0;
      let customerExtraCharge = 0;

      if (listingCost <= 240) {
        serviceAmount = listingCost / (1 + customerChargeRate);
      } else {
        serviceAmount = listingCost;
        workerCommission = serviceAmount * commissionRate;

        if (serviceAmount < 400 && workerCommission < minimumMargin) {
          customerExtraCharge = minimumMargin - workerCommission;
          serviceAmount = listingCost - customerExtraCharge;
        }
      }

      const workerEarnings = serviceAmount - workerCommission;

      document.getElementById('reverseResult').style.display = 'block';
      document.getElementById('reverseResult').innerHTML = `
        <h3>Reverse Calculation</h3>
        <p><strong>Worker Service Cost:</strong> ₹${serviceAmount.toFixed(2)}</p>
        <p><strong>Commission to Hiroes:</strong> ₹${workerCommission.toFixed(2)}</p>
        <p><strong>Worker Earnings:</strong> ₹${workerEarnings.toFixed(2)}</p>
        <p><strong>Customer Pays Extra (if applicable):</strong> ₹${customerExtraCharge.toFixed(2)}</p>
        <p><strong>Final Cost to Customer:</strong> ₹${listingCost.toFixed(2)}</p>
      `;
    }
  </script>
</body>
</html>